import Head from 'next/head'
import Image from 'next/image'
import styles from '@/styles/Home.module.scss'

import awards from '@/public/header/awards.png'
import projects from '@/public/header/projects.png'
import skills from '@/public/header/skills.png'
import { useEffect, useState } from 'react'


interface Props {
  imagePath: string,
  colorsArray: string[],
}

export default function Home({ imagePath, colorsArray }: Props) {

  const [selectedSection, setSelectedSection] = useState<number>(0);
  const [timer, setTimer] = useState<NodeJS.Timer | undefined>();

  useEffect(() => {
    setTimer(setInterval(() => {
      setSelectedSection((prev) => (prev + 1) % 3 + 1)
    }, 2000))
    return () => {
      setTimer(undefined)
      clearInterval(timer)
    }
  }, [])

  const setSelection = (index: number) => {
    setSelectedSection(index)
    clearInterval(timer)
    setTimer(undefined)
  }

  const goToSelection = (index: number) => {
    const sections = ['skills', 'projects', 'awards']
    const elem = document.getElementById(sections[index - 1])
    console.log(elem?.scrollIntoView({ behavior: 'smooth' }))
  }

  return (
    <>
      <Head>
        <title>Filipe Montanari Soccol - Portfolio</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href={imagePath} />
      </Head>
      <main className={styles.main}>
        <div className={styles.holder}>
          <div className={styles.socialBig}>
            <a className={styles.socialIcons}><Image src='/github.svg' alt='github' width={24} height={24} /></a>
            <a className={styles.socialIcons}><Image src='/linkedin.svg' alt='linkedin' width={24} height={24} /></a>
            <a className={styles.socialIcons}><Image src='/twitter.svg' alt='twitter' width={24} height={24} /></a>
          </div>
          <h1 className={styles.title}>Filipe Montanari Soccol</h1>
          <div className={styles.socialSmall}>
            <a className={styles.socialIcons}><Image src='/github.svg' alt='github' width={32} height={32} /></a>
            <a className={styles.socialIcons}><Image src='/linkedin.svg' alt='linkedin' width={32} height={32} /></a>
            <a className={styles.socialIcons}><Image src='/twitter.svg' alt='twitter' width={32} height={32} /></a>
          </div>
        </div>
        <hr className="m1" />
        <div className={styles.holder2}>
          <div className={styles.bio}>
            <p>Senior Developer with extensive experience in web and game development, creative and excellent team player with a track record of success in high-impact projects and team leadership.</p>
            <button
              className={`${styles.bioItem} ${selectedSection == 1 ? styles.active : ''}`}
              onMouseEnter={() => setSelection(1)}
              onClick={() => goToSelection(1)}
            >
              Skills
            </button>
            <button
              className={`${styles.bioItem} ${selectedSection == 2 ? styles.active : ''}`}
              onMouseEnter={() => setSelection(2)}
              onClick={() => goToSelection(2)}
            >
              Projects
            </button>
            <button
              className={`${styles.bioItem} ${selectedSection == 3 ? styles.active : ''}`}
              onMouseEnter={() => setSelection(3)}
              onClick={() => goToSelection(3)}
            >
              Awards
            </button>
          </div>
          <div className={`${styles.imageHolder}`}>
            <div className={`${styles.holderEffect} ${selectedSection == 1 ? styles.active : ''}`}>
              <div className={`${styles.backgroundImage} ${styles.imageThree}  ${selectedSection == 1 ? styles.active : ''}`}></div>
              <Image className={`${styles.foregroundImage}  ${selectedSection == 1 ? styles.active : ''}`} src={skills} alt='Title' height={500}></Image>
            </div>
            <div className={`${styles.holderEffect} ${selectedSection == 2 ? styles.active : ''}`}>
              <div className={`${styles.backgroundImage} ${styles.imageTwo} ${selectedSection == 2 ? styles.active : ''}`}></div>
              <Image className={`${styles.foregroundImage}  ${selectedSection == 2 ? styles.active : ''}`} src={projects} alt='Title' height={500}></Image>
            </div>
            <div className={`${styles.holderEffect} ${selectedSection == 3 ? styles.active : ''}`}>
              <div className={`${styles.backgroundImage} ${styles.imageOne}  ${selectedSection == 3 ? styles.active : ''}`}></div>
              <Image className={`${styles.foregroundImage}  ${selectedSection == 3 ? styles.active : ''}`} src={awards} alt='Title' height={500}></Image>
            </div>
          </div>
        </div>
        <div id="skills" className={styles.sectionTitle}>
          <div><h2>Skills</h2></div>
          <div><hr /></div>
        </div>
        <div className={styles.sectionSkills}>
          <div>
            <h3>Front-end</h3>
            <ul>
              <li>Frameworks: React, Next, Vue, Vite, Gatsby</li>
              <li>Styles: CSS, Bootstrap, Tailwind</li>
              <li>Test: Jest, Mocha, Chai</li>
              <li>Providers: Web3, Ethers</li>
              <li>Decentralized services integration</li>
            </ul>
          </div>
          <div>
            <h3>Back-end</h3>
            <ul>
              <li>Node, Typescript</li>
              <li>Smart-contract: Truffle, Hardhat, Solidity</li>
            </ul>
          </div>
          <div>
            <h3>Management</h3>
            <ul>
              <li>Project Planning</li>
              <li>Team management: Asana, Jira, Git</li>
              <li>Quick learner of new development tools and methods</li>
            </ul>
          </div>
          <div>
            <h3>Front-end</h3>
            <ul>
              <li>Frameworks: React, Next, Vue, Vite, Gatsby</li>
              <li>Styles: CSS, Bootstrap, Tailwind</li>
              <li>Test: Jest, Mocha, Chai</li>
              <li>Providers: Web3, Ethers</li>
              <li>Decentralized services integration</li>
            </ul>
          </div>
          <div>
            <h3>Back-end</h3>
            <ul>
              <li>Node, Typescript</li>
              <li>Smart-contract: Truffle, Hardhat, Solidity</li>
            </ul>
          </div>
          <div>
            <h3>Management</h3>
            <ul>
              <li>Project Planning</li>
              <li>Team management: Asana, Jira, Git</li>
              <li>Quick learner of new development tools and methods</li>
            </ul>
          </div>
        </div>
        <div id="projects" className={styles.sectionTitle}>
          <div><h2>Projects</h2></div>
          <div><hr /></div>
        </div>
        <div className={styles.sectionProjects}>
          <div className={styles.project}>
            <div className={styles.projectImage}>
              <Image src='/projects/otoco_48.png' alt='otoco.io' width={300} height={300} />
            </div>
            <div className={styles.projectDescription}>
              <div><Image src='/projects/otoco_icon2.png' alt='otoco.io' width={64} height={64} /></div>
              <p>otoco.io</p>
              <p>We used to have handwritten airline tickets. Now our boarding passes are a QR code. Companies too are being digitized, and OtoCo is the first to do it, leapfrogging Web2 and using blockchains as the enabling tech.</p>
            </div>
            <div className={styles.projectImage}></div>
          </div>
          <div className={styles.project}>
            <div className={styles.projectImage}></div>
            <div className={`${styles.projectDescription} ${styles.inverse}`}>
              <div><Image src='/projects/fruit_icon.png' alt='otoco.io' width={64} height={64} /></div>
              <p>fruit.dance</p>
              <p>Whether you're swiping on your mobile or arrow-smashing on your keyboard, it's time to mix and match those juicy fruits. Press them together and watch the magic happen as they transform into entirely new fruits!</p>
            </div>
            <div className={styles.projectImage}><Image src='/projects/fruit_48.png' alt='otoco.io' width={300} height={300} /></div>
          </div>
          <div className={styles.project}>
            <div className={styles.projectImage}><Image src='/projects/ipfs_48.png' alt='otoco.io' width={300} height={300} /></div>
            <div className={styles.projectDescription}>
              <div><Image src='/projects/ipfs_icon.png' alt='otoco.io' width={64} height={64} /></div>
              <p>IPFS React/Vue Components</p>
              <p>Load any IPFS content from the fastest gateway available just passing a valid path. The plugin itself verify for you the fastest suitable gateways from the Public Gateways list provided by Protocol Labs.</p>
            </div>
            <div className={styles.projectImage}></div>
          </div>
        </div>
        <div id="awards" className={styles.sectionTitle}>
          <div><h2>Awards</h2></div>
          <div><hr /></div>
        </div>
        <div className={styles.sectionAwards}>
          <div className={styles.award}>
            <h3>IPFS Microgrants</h3>
            <p>Filecoin Grants Program</p>
          </div>
          <div className={styles.awardDescription}>
            <div>NOVEMBER 2022</div>
            <div>Earned a Micro Grant to develop Vue and React open source components to support IPFS fetch data from multiple gateways.</div>
            <ul>
              <li><a href="https://github.com/filipesoccol/ipfs-public-fetcher" target='_blank'>IPFS Fetcher Repo ⦦</a></li>
              <li><a href="https://github.com/filipesoccol/vue-ipfs-components" target='_blank'>Vue IPFS Components Repo ⦦</a></li>
              <li><a href="https://github.com/filipesoccol/react-ipfs-components" target='_blank'>React IPFS Components Repo ⦦</a></li>
            </ul>
          </div>
          <div className={styles.award}>
            <h3>Polygon and Filecoin Award</h3>
            <p>Ethereum São Paulo 2022</p>
          </div>
          <div className={styles.awardDescription}>
            <div>OCTOBER 2022</div>
            <div>Earned a prize with the Doiim team project Web3RP. Get a real helper to streamline your business of any size or kind as fast as a couple of clicks.</div>
            <ul>
              <li><a href="https://github.com/doiim/web3RP" target='_blank'>Web3RP Repo ⦦</a></li>
            </ul>
          </div>
          <div className={styles.award}>
            <h3>Superfluid Award</h3>
            <p>ETHGlobal 2021</p>
          </div>
          <div className={styles.awardDescription}>
            <div>OCTOBER 2021</div>
            <div>Earned a prize as a solo developer with project Fluid Miners. A Superfluid gamified coin offering, bonus distribution, using DAI as energy resource.</div>
            <ul>
              <li><a href="https://ethglobal.com/showcase/fluid-miners-0m6nt" target='_blank'>Fluid Miners Pitch ⦦</a></li>
              <li><a href="https://github.com/doiim/fluid-miners" target='_blank'>Fluid Miners Repo ⦦</a></li>
            </ul>
          </div>
          <div className={styles.award}>
            <h3>Ripio Award</h3>
            <p>ETH Buenos Aires 2018</p>
          </div>
          <div className={styles.awardDescription}>
            <div>MAY 2018</div>
            <div>Earned a prize with the Doiim team project BId, legally binding blockchain identity.</div>
            <ul>
              <li><a href="https://github.com/ETHBuenosAires-Doiim/bID" target='_blank'>bID Repo ⦦</a></li>
            </ul>
          </div>
        </div>
        <div className={styles.footer}>
          <hr />
          <div className={styles.social}>
            <a><Image src='/github.svg' alt='github' width={24} height={24} /></a>
            <a><Image src='/linkedin.svg' alt='linkedin' width={24} height={24} /></a>
            <a><Image src='/twitter.svg' alt='twitter' width={24} height={24} /></a>
          </div>
          <p>LONDRINA - PARANA - BRAZIL</p>
          <p>filipe.soccol@gmail.com</p>
        </div>
      </main>
    </>
  )
}

// This gets called on every request
export async function getServerSideProps() {
  // Fetch data from external API

  const size = 200
  const squareSize = size / 8;
  let svgString = `< svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 200 200">`;

  const colors = [

    '#0C0A14',
    '#221F22',
    '#4B4538',
    '#FFFFD1',
    '#FFBB01',
  ];

  for (let i = 0; i < 8; i++) {
    for (let j = 0; j < 8; j++) {
      const rect = `<rect
                x="${j * squareSize}"
                y="${i * squareSize}"
                width="${squareSize}"
                height="${squareSize}"
                fill="${colors[parseInt((Math.random() * 5).toString())]}"
              /> `;
      svgString += rect;
    }
  }

  svgString += "</svg>"
  const base64String = Buffer.from(svgString).toString('base64');
  // Pass data to the page via props
  return { props: { imagePath: `data:image/svg+xml;base64,${base64String}`, colorsArray: colors } }
}